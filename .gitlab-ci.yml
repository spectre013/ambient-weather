stages:
  - scan
  - build docker

ui:
  stage: build docker
  script:
    - cd weather-ui
    - docker build -t $DOCKER_REGISTRY/production/weather-ui:2.2 .
    - docker push $DOCKER_REGISTRY/production/weather-ui:2.2


server:
  stage: build docker
  script:
    - cd weather-server
    - docker build -t $DOCKER_REGISTRY/production/weather-server:2.1.6 . --no-cache
    - docker push $DOCKER_REGISTRY/production/weather-server:2.1.6

transfer:
  stage: build docker
  script:
    - cd weather-transfer
    - docker build -t $DOCKER_REGISTRY/production/weather-transfer:2.1.2 . --no-cache
    - docker push $DOCKER_REGISTRY/production/weather-transfer:2.1.2



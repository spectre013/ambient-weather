stages:
  - build

before_script:
  - docker login $DOCKER_REGISTRY -u $DOCKER_USERNAME -p $DOCKER_PASSWORD


ui:
  stage: build
  script:
    - cd weather-ui
    - docker build -t $DOCKER_REGISTRY/production/weather-ui:1.6 .
    - docker push $DOCKER_REGISTRY/production/weather-ui:1.6
    - cd ../


server:
  stage: build
  script:
    - cd weather-server
    - docker build -t $DOCKER_REGISTRY/production/weather-server:1.6 .
    - docker push $DOCKER_REGISTRY/production/weather-server:1.6
    - cd ../

notify:
  stage: build
  script:
    - curl -v https://docker.zoms.net/v2/_catalog
    - cd weather-notify
    - docker build -t $DOCKER_REGISTRY/production/weather-notify:1.0 .
    - docker push $DOCKER_REGISTRY/production/weather-notify:1.0
    - cd ../

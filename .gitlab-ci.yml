stages:
  - scan
  - build docker

ui:
  stage: build docker
  script:
    - cd weather-ui
    - docker build -t $DOCKER_REGISTRY/production/weather-ui:v3.0 .
    - docker push $DOCKER_REGISTRY/production/weather-ui:v3.0


server:
  stage: build docker
  script:
    - cd weather-server
    - docker build -t $DOCKER_REGISTRY/production/weather-server:v4.0 . --no-cache
    - docker push $DOCKER_REGISTRY/production/weather-server:v4.0

transfer:
  stage: build docker
  script:
    - cd weather-transfer
    - docker build -t $DOCKER_REGISTRY/production/weather-transfer:2.1.2 . --no-cache
    - docker push $DOCKER_REGISTRY/production/weather-transfer:2.1.2


